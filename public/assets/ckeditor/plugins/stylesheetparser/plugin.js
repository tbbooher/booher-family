/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){function e(e,t,a){var i=e.join(" ");i=i.replace(/(,|>|\+|~)/g," "),i=i.replace(/\[[^\]]*/g,""),i=i.replace(/#[^\s]*/g,""),i=i.replace(/\:{1,2}[^\s]*/g,""),i=i.replace(/\s+/g," ");for(var n=i.split(" "),o=[],r=0;r<n.length;r++){var l=n[r];a.test(l)&&!t.test(l)&&-1==CKEDITOR.tools.indexOf(o,l)&&o.push(l)}return o}function t(t,a,i){var n,o=[],r=[];for(n=0;n<t.styleSheets.length;n++){var l=t.styleSheets[n],s=l.ownerNode||l.owningElement;if(!(s.getAttribute("data-cke-temp")||l.href&&"chrome://"==l.href.substr(0,9)))for(var d=l.cssRules||l.rules,c=0;c<d.length;c++)r.push(d[c].selectorText)}var u=e(r,a,i);for(n=0;n<u.length;n++){var p=u[n].split("."),m=p[0].toLowerCase(),h=p[1];o.push({name:m+"."+h,element:m,attributes:{"class":h}})}return o}CKEDITOR.plugins.add("stylesheetparser",{requires:["styles"],onLoad:function(){var e=CKEDITOR.editor.prototype;e.getStylesSet=CKEDITOR.tools.override(e.getStylesSet,function(e){return function(a){var i=this;e.call(this,function(e){var n=i.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,o=i.config.stylesheetParser_validSelectors||/\w+\.\w+/;a(i._.stylesDefinitions=e.concat(t(i.document.$,n,o)))})}})}})}();